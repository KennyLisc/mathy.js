"use strict";(function(e){function r(e){for(var r=-1;;)return r=e.indexOf(")",++r),~r?r:-1}function n(e,r,t,l){if(e.type===u.placeholder&&e.value===r)return e.type=u.group,e.children.push(i(t,l)),!0;for(var a=0;e.children.length>a;a+=1)if(n(e.children[a],r,t,l))return!0;return!1}function i(e,t){var l,s,h,d;if(l=e.lastIndexOf("("),~l){var p=l+r(e.slice(l));s=e.slice(0,l),h=e.slice(l+1,p);var o=e.slice(p+1);d=new c(u.group);var v=++a;return d.children.push(i(s+"$"+v+o,t)),n(d.children[0],v,h,t),d}if(l=e.lastIndexOf("+"),~l)return d=new c(u.add),s=e.slice(0,l).trim(),s&&d.children.push(i(s,t)),h=e.slice(l+1).trim(),h&&d.children.push(i(h,t)),d;if(l=e.lastIndexOf("-"),~l)return d=new c(u.subtraction),s=e.slice(0,l).trim(),d.children.push(i(s,t)),h=e.slice(l+1).trim(),h&&d.children.push(i(h,t)),d;if(l=e.lastIndexOf("*"),~l)return d=new c(u.multiply),s=e.slice(0,l).trim(),s&&d.children.push(i(s,t)),h=e.slice(l+1).trim(),h&&d.children.push(i(h,t)),d;if(l=e.lastIndexOf("/"),~l)return d=new c(u.division),s=e.slice(0,l).trim(),s&&d.children.push(i(s,t)),h=e.slice(l+1).trim(),h&&d.children.push(i(h,t)),d;if(l=e.lastIndexOf("^"),~l)return d=new c(u.power),s=e.slice(0,l).trim(),s&&d.children.push(i(s,t)),h=e.slice(l+1).trim(),h&&d.children.push(i(h,t)),d;if("$"===e[0])return new c(u.placeholder,parseInt(e.slice(1),10));var f=t.filter(function(r){return r.name===e})[0];return f?(e=f.derivation,i(e,t)):(e=e.trim(),new c(u.value,parseInt(e,10)||null))}function t(e){if(!e)return 0;for(var r=0;e.children.length>r;r+=1)t(e.children[r]);switch(e.type){case u.add:return e.value=e.children[0].value+e.children[1].value;case u.subtraction:return e.value=e.children[0].value-e.children[1].value;case u.multiply:return e.value=e.children[0].value*e.children[1].value;case u.division:return e.value=e.children[0].value/e.children[1].value;case u.group:return e.value=t(e.children[0]);case u.power:return e.value=Math.pow(e.children[0].value,e.children[1].value);case u.value:return e.value}return 0}var l=function(){function e(){for(var e=[],r=0;arguments.length-0>r;r++)e[r]=arguments[r+0];this.getRules=function(){return e}}return e.prototype.add=function(){for(var e=[],r=0;arguments.length-0>r;r++)e[r]=arguments[r+0];var n=this.getRules();n.push.apply(n,e)},e.prototype.process=function(){for(var e,r=this.getRules(),n=1===r.length?r:r.filter(function(e){return e.result},[]),l=[],u=0;n.length>u;u+=1)e=i(n[u].derivation.replace(/\s+/gi,""),r),l.push(t(e));return l},e}();e.Engine=l;var u,a=0,c=function(){function e(e,r,n){r===void 0&&(r=0),n===void 0&&(n=[]),this.type=e,this.value=r,this.children=n}return e}();(function(e){e._map=[],e._map[0]="add",e.add=0,e._map[1]="subtraction",e.subtraction=1,e._map[2]="multiply",e.multiply=2,e._map[3]="division",e.division=3,e._map[4]="group",e.group=4,e._map[5]="power",e.power=5,e._map[6]="value",e.value=6,e._map[7]="placeholder",e.placeholder=7})(u||(u={}))})(exports.mathy||(exports.mathy={}));var mathy=exports.mathy;
//@ sourceMappingURL=src/mathy.min.js.map